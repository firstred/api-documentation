Create organization
===================
.. api-name:: Organization API
   :version: 2

.. warning::
   This API is currently in development and not usable yet.

.. endpoint::
   :method: POST
   :url: https://api.mollie.com/v2/organization

.. authentication::
   :api_keys: true
   :oauth: false

*Partners* can request a registration form for their customers. The customer can create an organization
on the Mollie platform and connect it to the partner who initiate the proces via that unique form.

Once you have created the form, you should redirect your customer to the URL in the ``_links.form`` property from the
response. The customer will come back to your application or service via the OAuth authorization flow.

If you want to become a partner of Mollie, please see our `website <https://www.mollie.com/en/partners/>`_ and join our
Partner Program.

.. note::
   This API can only be used by Partners.

Parameters
----------
.. list-table::
   :widths: auto

   * - ``name``

       .. type:: string
          :required: true

     - Name of the organization

   * - ``email``

       .. type:: string
          :required: true

     - E-mail address of the organization. This will be used for the confirmation mail.

   * - ``address``

       .. type:: address object
          :required: false

     - The address of the organization.

       .. note::
         All childs are required when there is at least one value set in one of the parameters.

       .. list-table::
          :widths: auto

          * - ``streetAndNumber``

              .. type:: string

            - Street name and house number of the organization.

          * - ``postalCode``

              .. type:: string

            - Postal code of the organization.

          * - ``city``

              .. type:: string

            - City of the organization.

          * - ``country``

              .. type:: string

            - Country of the organization. Provide this in
              `ISO 3166-1 alpha-2 code <https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2>`_.

              For example: ``NL`` ``BE`` ``DE``


   * - ``registrationNumber``

       .. type:: string
          :required: false

     - The registration number of the organization at the (local) chamber of commerce.

   * - ``vatNumber``

       .. type:: string
          :required: false

     - The VAT number of the organization, if based in the European Union. The VAT number has been checked with the
       `VIES <http://ec.europa.eu/taxation_customs/vies/>`_ by Mollie.

   * - ``client_id``

       .. type:: string
          :required: true

     - The client ID you receive when :doc:`registering your app </oauth/getting-started>`.

   * - ``scope``

       .. type:: string
          :required: true

     - A space separated list of permissions your application or service requires. Refer to
       :doc:`Permissions </oauth/permissions>` for more information about the available scopes.

   * - ``state``

       .. type:: string
          :required: true

     - A random string generated by your application or service to prevent CSRF attacks.

   * - ``redirect_uri``

       .. type:: string
          :required: true

     - The URL your customer is sent back to once the process has been finished and authorized.

Response
--------
``200`` ``application/hal+json; charset=utf-8``

.. list-table::
   :widths: auto

   * - ``resource``

       .. type:: string

     - Indicates the response contains a payment object. Will always contain ``signup-form`` for this endpoint.

   * - ``id``

       .. type:: string

     - The identifier uniquely referring to this signup form. Mollie assigns this identifier at the form creation time.
       For example ``frm_12345678``. Its ID will always be used by Mollie to refer to a certain signup form.

   * - ``mode``

       .. type:: string

     - The mode used to create this signup form. Mode determines whether a signup is real (live mode) or in test.

       Possible values: ``live`` ``test``

   * - ``createdAt``

       .. type:: datetime

     - The form's date and time of creation, in `ISO 8601 <https://en.wikipedia.org/wiki/ISO_8601>`_ format.

   * - ``expiresAt``

       .. type:: datetime

     - The date and time the form will expire, in `ISO 8601 <https://en.wikipedia.org/wiki/ISO_8601>`_ format. On the
       expiry date and time (what is 30 minutes after creation) the form and all it's data will be deleted.

   * - ``name``

       .. type:: string

     - Name of the organization.

   * - ``email``

       .. type:: string

     - E-mail address of the organization.

   * - ``address``

       .. type:: address object
          :required: false

     - Address data of the organization. This object is omitted if you not provided it.

       .. list-table::
          :widths: auto

          * - ``streetAndNumber``

              .. type:: string

            - Street name and house number of the organization.

          * - ``postalCode``

              .. type:: string

            - Postal code of the organization.

          * - ``city``

              .. type:: string

            - City of the organization.

          * - ``country``

              .. type:: string

            - Country of the organization in format:
              `ISO 3166-1 alpha-2 code <https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2>`_.

              For example: ``NL`` ``BE`` ``DE``

   * - ``registrationNumber``

       .. type:: string
          :required: false

     - The registration number of the organization at the (local) chamber of commerce.  This parameter is omitted if you
       not provided it.

   * - ``vatNumber``

       .. type:: string
          :required: false

     - The VAT number of the organization. This parameter is omitted if you not provided it.

   * - ``redirect_uri``

       .. type:: string

     - The URL your customer is sent back to once the process has been finished and authorized.

   * - ``partnerId``

       .. type:: string

     - Your Partner ID based on your API key.

   * - ``state``

       .. type:: string

     - The random string generated by your application or service to prevent CSRF attacks.

   * - ``_links``

       .. type:: object

     - An object with several URL objects relevant to the payment. Every URL object will contain an ``href`` and a
       ``type`` field.

       .. list-table::
          :widths: auto

          * - ``form``

              .. type:: URL object

            - The URL your customer should visit to complete the signup and authorize process. This is where you should
              redirect the consumer to.

          * - ``documentation``

              .. type:: URL object

            - The URL to the signup form creation endpoint documentation.

Example
-------

Request
^^^^^^^
.. code-block:: bash
   :linenos:

      curl -X POST https://api.mollie.com/v2/organization \
       -H "Authorization: Bearer test_dHar4XY7LxsDOtmnkVtjNVWXLSlXsM" \
       -d "name=Mollie B.V." \
       -d "email=info@mollie.com" \
       -d "client_id=UIbrGN74t13BJO3UdGCn73" \
       -d "scope=payments.read payments.write" \
       -d "state=XudwZnQHfd" \
       -d "redirect_uri=https://webshop.example.org/registration/finish"

Response
^^^^^^^^
.. code-block:: http
   :linenos:

   HTTP/1.1 200 OK
   Content-Type: application/hal+json; charset=utf-8

   {
        "resource": "signup-form",
        "id": "frm_12345678",
        "mode": "test",
        "createdAt": "2018-09-06T16:03:34+00:00",
        "expiresAt": "2018-09-06T16:33:34+00:00",
        "name": "Mollie B.V.",
        "email": "info@mollie.com",
        "address": {
            "streetAndNumber": "Keizersgracht 313",
            "postalCode": "1016 EE",
            "city": "Amsterdam",
            "country": "NL"
        },
        "registrationNumber": "30204462",
        "vatNumber": "NL815839091B01",
        "redirectUrl": "https://webshop.example.org/registration/finish",
        "partnerId": "1234567",
        "state": "XudwZnQHfd",
        "_links": {
            "form": {
                "href": "https://api.mollie.com/v2/organizations/signup-form/frm_12345678",
                "type": "text/html"
            },
            "documentation": {
                "href": "https://docs.mollie.com/reference/v2/organizations-api/create-organization",
                "type": "text/html"
            }
        }
   }

Next step
----------
When you redirect your customer to the ``_links.form`` property from the response, they will finish the registration
and authorization on our side. After that they will be redirect back to your application or service with the OAuth
authorization query string parameters. See the :doc:`Connect API </reference/oauth2/authorize>` for more information.
After this step your customer is ready to go and you can access the organization via the
:doc:`Get Current Organization API </reference/v2/organizations-api/current-organization>` with an OAuth Access Token.